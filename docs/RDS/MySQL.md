# 🏗 RDS vs EC2(Docker) 기반 MySQL 비교 및 선택 근거

## 1. 개요

이 문서는 MySQL을 **AWS RDS**로 운영할지, **EC2 + Docker** 조합으로 직접 운영할지를 비교하고,  
최종적으로 **RDS를 선택한 이유**를 정리한 것입니다.

---

## 2. 기능 및 운영 관점 비교

| 항목         | RDS                                                | EC2 + Docker                                               |
|--------------|----------------------------------------------------|------------------------------------------------------------|
| 인스턴스 변경 | - 콘솔에서 인스턴스 타입 변경 후 자동 반영        | - 콘솔에서 인스턴스 타입 변경<br>→ 수동으로 인스턴스 재시작<br>→ 재시작 시 Docker 컨테이너가 자동으로 떠 있도록 systemd 등으로 추가 설정 필요 |
| 스토리지 추가 | - 콘솔에서 스토리지 용량만 입력하면 확장          | - 콘솔에서 EBS 스토리지 추가<br>→ 사전에 Docker volume을 호스트 경로와 연동해두어야 함 |
| 가용성 (싱글 AZ 기준) | 99.5%                                       | 99.5%                                                      |
| 백업         | - 콘솔에서 자동 백업 설정 클릭으로 활성화<br>→ 스냅샷, PITR(Point-In-Time Recovery) 지원 | - 직접 백업 스크립트 작성 (mysqldump, xtrabackup 등)<br>→ 백업 파일을 S3 등 외부 스토리지에 저장하는 작업 필요 |
| 복구         | - 원하는 일자/시점으로 클릭만으로 복구 가능       | - 새 EC2 인스턴스 생성<br>→ Docker MySQL 컨테이너 띄우기<br>→ 백업 파일 다운로드<br>→ 수동으로 복구 작업 진행 |
| 모니터링      | - RDS 전용 DB 메트릭 제공 (CPU, 연결 수, IOPS 등)<br>→ 성능 인사이트, 알람 연동 용이 | - CloudWatch 에이전트 설치<br>→ MySQL 메트릭 수집(쿼리 수, 슬로우 쿼리 등)을 Prometheus/Grafana 등으로 직접 구성해야 함 |
| 고가용성 구성 | - Multi-AZ 옵션을 클릭만으로 활성화 가능<br>→ Master-Standby 구조 자동 구성<br>→ 장애 시 자동 페일오버 지원 | - 각 AZ별로 EC2 인스턴스 생성<br>→ Docker MySQL 컨테이너 각각 구성<br>→ Primary / Replica 설정 및 복제 구성 직접 수행 (설정 난이도 높음)<br>→ 장애 시 Primary → Replica 수동 페일오버<br>→ 각 EC2/컨테이너에 대한 모니터링도 별도로 구성 필요 |

---

## 3. 비용 비교 (m5.large + 30GiB 기준)

- 인스턴스 스펙 가정:
    - 타입: **m5.large**
    - 스토리지: **30GiB**
- 네트워크 비용: RDS, EC2 모두 **0.01 USD / GB** 로 동일하다고 가정

| 항목 | 월 비용 (USD) |
|------|--------------|
| RDS  | **172.28 USD** |
| EC2  | **87.7 USD**   |

- RDS가 대략 **EC2의 2배 정도 비용**이 드는 구조

---

## 4. 최종 선택: RDS를 사용하는 이유

비용만 보면:

- EC2 + Docker로 직접 MySQL을 운영할 경우  
  → 약 **절반 수준의 비용**으로 운영 가능

그러나, 다음과 같은 이유로 **RDS를 선택**했습니다.

1. **백업 및 복구의 간편함**
    - 자동 백업, 스냅샷, Point-In-Time 복구 등 **“클릭 한 번으로 복구”** 가능한 기능 제공
    - 반면, EC2 직접 운영은
        - 백업 스크립트 작성
        - 백업 스토리지 관리
        - 복구 절차(새 EC2 생성 → Docker 구성 → 복원 작업)를 매뉴얼하게 처리해야 함

2. **모니터링 및 운영 편의성**
    - RDS는 CPU, 연결 수, 읽기/쓰기 지연, IOPS 등의 **DB 특화 메트릭**을 바로 제공
    - 장애 분석 및 성능 튜닝 시 유리
    - EC2의 경우, CloudWatch + 에이전트 + 별도 모니터링 스택(Prometheus 등)까지 모두 직접 구성해야 함

3. **고가용성 구성의 난이도**
    - RDS는 Multi-AZ 구성을 **옵션 클릭만으로 활성화** 가능하며
    - 장애 시 자동 페일오버까지 지원
    - EC2 + Docker 환경에서 동일 수준의 HA를 구현하려면:
        - AZ별 인스턴스 구성
        - Replication/Failover 자동화 스크립트
        - 모니터링 & 알람 체계
          를 모두 직접 설계해야 하며 운영 부담이 큼

4. **DB는 “한 대라도 안전해야 하는” 구성 요소**
    - 애플리케이션 서버(EC2)는 여러 대로 수평 확장하고, 장애 시 교체도 비교적 쉽게 가능
    - 그러나 DB는 구조적으로 **중앙 집중적인 역할**을 하며,
        - 데이터 정합성
        - 백업/복구 전략
        - 장애 대응 시나리오
          에서 **운영 리스크가 훨씬 크다**는 점을 고려

> **결론:**
> - 월 **172 USD (약 25만 원)** 이라는 RDS 비용은
    >   - 스냅샷, 자동 백업, 모니터링, 복구 편의성, Multi-AZ 구성의 안정성을 고려하면
>   - **“두 배 가격이지만, 그만한 가치를 하는 비용”**이라고 판단했습니다.
> - 특히 DB는 EC2처럼 여러 대를 두고 쉽게 교체할 수 있는 레이어가 아니므로,  
    >   **직접 운영보다는 AWS가 제공하는 RDS에 맡기는 것이 더 안전하고 합리적**이라고 결론 내렸습니다.
