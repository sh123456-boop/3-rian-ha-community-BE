# EC2 vs RDS 비교

아래는 EC2와 RDS의 차이를 표로 나타낸것입니다.

|  | RDS | EC2 - docker |
| --- | --- | --- |
| 인스턴스 변경 | 콘솔로 인스턴스 변경  | 콘솔로 인스턴스 변경<br>→ 수동 재시작<br>→ 재시작할 때 자동으로 도커 컨테이너 띄어지게 system 설정필요 |
| 스토리지 추가 | 콘솔로 추가 스토리지 입력 | 콘솔로 추가 스토리지 입력<br>→ 사전에 docker volume으로 호스트와 연동 필요 |
| 가용성(싱글 az 기준) | 99.5% | 99.5% |
| 백업 | 자동 백업 설정 클릭 | 백업 스크립트 작성<br>→ 백업 파일을 추가적인 저장소에 저장 |
| 복구 | 클릭만으로 원하는 일자/시점으로 복구 | 새 EC2 생성<br>→ 도커 MySQL 띄우기<br>→ 백업 파일 받기<br>→ 복구 작업 수동 진행 |
| 모니터링 | DB관련 메트릭 제공 | CloudWatch 에이전트 설치 <br>→ MySQl 매트릭 수집 수동으로 구성(Prometheus 등) |
| 구성 | Multi AZ(Master-slave 구조) 클릭만으로 구성 가능 | 각 az 별 ec2 생성<br>→ 도커 MySQL 띄우기<br>→ Primary, Replica 컨테이너 별 mysql 설정작업 (구체적으로는 알아보지 않았습니다)<br>→ 장애 시 primary → replica로 수동 페일오버<br>→ 각 ec2별 모니터링 별도로 구성 필요 |

EC2에 직접 MySQL을 설치해도 되겠지만 저는 그냥 RDS를 선택하겠습니다. m5.large 기준, 30GiB의 스토리지 적용시 RDS는 172.28 USD, EC2는 87.7 USD 입니다. (네트워크 비용은 둘 다 0.01 USD/GB로 동일합니다.) 가격은 두 배 차이 나지만 월간 25만원이면(=172달러) 그렇게 비싼 것도 아니고 스냅샷과 모니터링, 백업 및 복구가 더욱 간편하기 때문입니다. 더욱이 DB는 EC2처럼 여러대를 두는 것이 아니다 보니 저보다는 AWS를 믿고 사용하겠습니다.
